- content_for :page_title do
  = Spree.t(:return_authorizations)
- content_for :page_tabs do
  %li{:class => "#{"active" if params[:q][:state_eq].blank?}"}
    = link_to Spree.t(:all), spree.admin_return_authorizations_path
  %li{:class => "#{"active" if params[:q][:state_eq] == "authorized"}"}
    = link_to Spree.t(:authorized), params.to_h.merge({q: {state_eq: :authorized}})
  %li{:class => "#{"active" if params[:q][:state_eq] == "canceled"}"}
    = link_to Spree.t(:canceled), params.to_h.merge({q: {state_eq: :canceled}})
- content_for :table_filter do
  %div{"data-hook" => "admin_return_authorisations_index_filters"}
    = search_form_for [:admin, @search], url: spree.admin_return_authorizations_path do |f|
      .row
        .col-md-6
          .form-group
            = f.label :number_cont, Spree.t(:number)
            = f.text_field :number_cont, class: "form-control js-quick-search-target"
        .col-md-6
          .form-group
            = label_tag :q_state_eq, Spree.t(:status)
            = f.select :state_eq, Spree::ReturnAuthorization.state_machines[:state].states.collect {|s| [Spree.t("return_authorization_states.#{s.name}"), s.value]}, {include_blank: true}, class: 'select2'
      .form-actions{"data-hook" => "admin_return_authorisations_index_filters_buttons"}
        = button Spree.t(:search), 'search'
= render partial: 'spree/admin/shared/index_table_options', locals: { collection: @collection, per_page_action: :return_authorizations }
- if @collection.any?
  %table.table
    %thead
      %tr{"data-hook" => "rate_header"}
        %th= Spree.t(:created_at)
        %th= Spree.t(:number)
        %th= Spree.t(:order)
        %th= Spree.t(:status)
        %th
    %tbody
      - @collection.each do |return_authorization|
        %tr{"data-hook" => "return_authorization_row", :id => "#{spree_dom_id return_authorization}"}
          %td= return_authorization.created_at.to_date
          %td= link_to return_authorization.number, spree.edit_admin_order_return_authorization_path(return_authorization.order, return_authorization)
          %td= link_to return_authorization.order.number, spree.edit_admin_order_path(return_authorization.order)
          %td
            %span{:class => "label label-#{return_authorization.state}"}= Spree.t("return_authorization_states.#{return_authorization.state}")
          %td.actions.actions-1.text-right
            = link_to_edit return_authorization, url: spree.edit_admin_order_return_authorization_path(return_authorization.order, return_authorization), no_text: true
- else
  .alert.alert-info.no-objects-found
    = Spree.t(:no_resource_found, resource: plural_resource_name(Spree::ReturnAuthorization))
    \.
= render partial: 'spree/admin/shared/index_table_options', locals: { collection: @collection, per_page_action: :return_authorizations }
