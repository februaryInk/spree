= render partial: 'spree/admin/users/sidebar', locals: { current: :account }
= render partial: 'spree/admin/users/user_page_actions'
- content_for :page_title do
  = @user.email
.panel.panel-default{"data-hook" => "admin_user_edit_general_settings"}
  .panel-heading
    %h1.panel-title
      = Spree.t(:general_settings)
  .panel-body
    %div{"data-hook" => "admin_user_edit_form_header"}
      = render partial: 'spree/admin/shared/error_messages', locals: { target: @user }
    %div{"data-hook" => "admin_user_edit_form"}
      = form_for [:admin, @user], as: :user, url: spree.admin_user_url(@user), method: :put do |f|
        = render partial: 'form', locals: { f: f }
        %div{"data-hook" => "admin_user_edit_form_button"}
          = render partial: 'spree/admin/shared/edit_resource_links', locals: { collection_url: spree.admin_users_url }
#admin_user_edit_api_key.panel.panel-default{"data-hook" => "admin_user_api_key"}
  .panel-heading
    %h1.panel-title
      = Spree.t('access', scope: 'api')
  .panel-body
    - if @user.spree_api_key.present?
      .form-group
        #current-api-key
          %label
            = Spree.t('key', scope: 'api')
            \:
          %strong= @user.spree_api_key
      .form-actions
        = form_tag spree.clear_api_key_admin_user_path(@user), method: :put do
          = button Spree.t('clear_key', scope: 'api'), 'delete', 'submit', class: "btn-danger"
        %span.or= Spree.t(:or)
        = form_tag spree.generate_api_key_admin_user_path(@user), method: :put do
          = button Spree.t('regenerate_key', scope: 'api'), 'save'
    - else
      .alert.alert-warning= Spree.t('no_key', scope: 'api')
      .form-actions
        = form_tag spree.generate_api_key_admin_user_path(@user), method: :put do
          = button Spree.t('generate_key', scope: 'api'), 'key'
= render 'spree/admin/users/lifetime_stats'
