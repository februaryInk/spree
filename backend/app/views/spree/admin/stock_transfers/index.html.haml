- content_for :page_title do
  = plural_resource_name(Spree::StockTransfer)
- content_for :page_actions do
  = button_link_to Spree.t(:new_stock_transfer), new_admin_stock_transfer_path, { icon: 'add', class: 'btn-success' }
- end if can? :create, Spree::StockTransfer
.well{"data-hook" => "admin_orders_index_search"}
  %fieldset
    %legend= Spree.t(:search)
    = search_form_for @q, url: admin_stock_transfers_path do |f|
      .row.no-marginb
        .col-md-4
          .form-group
            = f.label :reference_cont, Spree.t(:reference_contains)
            = f.text_field :reference_cont, class: 'form-control'
        .col-md-4
          .form-group
            = f.label :source_location, Spree.t(:source)
            = f.select :source_location_id_eq,                                                            |
              options_from_collection_for_select(@stock_locations, :id, :name, @q.source_location_id_eq), |
              { include_blank: true }, class: 'select2'                                                   |
        .col-md-4
          .form-group
            = f.label :destination_location, Spree.t(:destination)
            = f.select :destination_location_id_eq,                                                            |
              options_from_collection_for_select(@stock_locations, :id, :name, @q.destination_location_id_eq), |
              { include_blank: true }, class: 'select2'                                                        |
      .form-actions
        %div{"data-hook" => "admin_stock_transfers_index_search_buttons"}
          = button Spree.t(:filter_results), 'search'
- if @stock_transfers.any?
  %table#listing_stock_transfers.table{"data-hook" => ""}
    %thead
      %tr{"data-hook" => "stock_transfers_header"}
        %th= Spree.t(:created_at)
        %th= Spree.t(:reference)
        %th= Spree.t(:source)
        %th= Spree.t(:destination)
        %th.actions
    %tbody
      - @stock_transfers.each do |stock_transfer|
        %tr{"data-hook" => "stock_transfer_row", :id => "#{spree_dom_id stock_transfer}"}
          %td= link_to stock_transfer.created_at, admin_stock_transfer_path(stock_transfer)
          %td= stock_transfer.reference
          %td= stock_transfer.source_location.try(:name)
          %td= stock_transfer.destination_location.try(:name)
          %td.actions.actions-1
            = link_to_with_icon 'show', Spree.t(:show), admin_stock_transfer_path(stock_transfer), class: 'btn btn-default btn-sm', no_text: true, data: {action: 'view'}
- else
  .alert.alert-info.no-objects-found
    = Spree.t(:no_resource_found, resource: plural_resource_name(Spree::StockTransfer))
    ,
    \#{link_to(Spree.t(:add_one), new_admin_stock_transfer_path) if can? :create, Spree::StockTransfer}!
= paginate @stock_transfers
