- content_for :page_title do
  = plural_resource_name(Spree::Promotion)
- content_for :page_actions do
  = button_link_to Spree.t(:new_promotion), new_object_url, class: "btn-success", icon: 'add'
- content_for :table_filter do
  %div{"data-hook" => "admin_promotions_index_search"}
    = search_form_for [:admin, @search] do |f|
      .row
        .col-md-6
          .form-group
            = label_tag :q_name_cont, Spree.t(:name)
            = f.text_field :name_cont, tabindex: 1, class: "form-control js-quick-search-target"
          .form-group
            = label_tag :q_code_cont, Spree.t(:code)
            = f.text_field :code_cont, tabindex: 1, class: "form-control"
        .col-md-6
          .form-group
            = label_tag :q_path_cont, Spree.t(:path)
            = f.text_field :path_cont, tabindex: 1, class: "form-control"
          .form-group
            = label_tag :q_promotion_category_id_eq, Spree.t(:promotion_category)
            = f.collection_select(:promotion_category_id_eq, @promotion_categories, :id, :name, { include_blank: Spree.t('match_choices.all') }, { class: 'select2' })
      .form-actions{"data-hook" => "admin_promotions_index_search_buttons"}
        = button Spree.t(:filter_results), 'search'
= paginate @promotions
- if @promotions.any?
  %table.table
    %thead
      %tr
        %th= Spree.t(:name)
        %th= Spree.t(:code)
        %th= Spree.t(:description)
        %th= Spree.t(:usage_limit)
        %th= Spree.t(:promotion_uses)
        %th= Spree.t(:expiration)
        %th.actions{"data-hook" => "admin_promotions_index_header_actions"}
    %tbody
      - @promotions.each do |promotion|
        %tr{:id => "#{spree_dom_id promotion}"}
          %td= link_to promotion.name, edit_admin_promotion_path(promotion)
          %td= promotion.code
          %td= promotion.description
          %td= promotion.usage_limit.nil? ? "âˆž" : promotion.usage_limit
          %td= Spree.t(:current_promotion_usage, count: promotion.credits_count)
          %td= promotion.expires_at.to_date.to_s(:short_date) if promotion.expires_at
          %td.actions.actions-2{"data-hook" => "admin_promotions_index_row_actions"}
            = link_to_edit promotion, no_text: true
            = link_to_delete promotion, no_text: true
- else
  .alert.alert-info.no-objects-found
    = Spree.t(:no_resource_found, resource: plural_resource_name(Spree::Promotion))
    ,
    \#{link_to Spree.t(:add_one), new_object_url}!
