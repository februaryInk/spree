.form-group
  = label_tag "#{prefix}[calculator_attributes][preferred_base_percent]", |
    Spree.t(:base_percent)                                                |
  = preference_field_tag(                                       |
    "#{prefix}[calculator_attributes][preferred_base_percent]", |
    calculator.preferred_base_percent,                          |
    type: calculator.preference_type(:base_percent))            |
.form-group.no-marginb
  = label_tag nil, Spree.t(:tiers)
  = content_tag :div, nil, class: "hidden js-original-tiers",            |
    data: { :'original-tiers' => Hash[calculator.preferred_tiers.sort] } |
.js-tiers
%button.btn.btn-success.js-add-tier= Spree.t(:add)
%script#tier-input-name{:type => "text/x-handlebars-template"}
  :cdata
    \#{prefix}[calculator_attributes][preferred_tiers][{{base}}]
%script#tier-fields-template{:type => "text/x-handlebars-template"}
  :cdata
    <div class="tier panel panel-default">
    <div class="panel-body">
    <div class="form-group">
    <div class="input-group">
    <span class="input-group-addon">$</span>
    <input class="js-base-input form-control" type="text" value={{baseField.value}}>
    </div>
    </div>
    <div class="form-group">
    <div class="input-group">
    <span class="input-group-addon">%</span>
    <input class="js-value-input form-control"
    name="{{valueField.name}}" type="text" value={{valueField.value}}>
    </div>
    </div>
    <a class="js-remove-tier btn btn-default btn-sm"><span class="icon icon-delete"></span></a>
    </div>
    </div>
