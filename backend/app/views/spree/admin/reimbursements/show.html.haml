= render partial: 'spree/admin/shared/order_tabs', locals: { current: :customer_returns }
- content_for :page_title do
  \/ #{Spree::Reimbursement.model_name.human} ##{@reimbursement.number}
= render partial: 'spree/admin/shared/error_messages', locals: { target: @reimbursement }
%fieldset.no-border-bottom
  %legend= Spree.t(:items_reimbursed)
  %table.table.table-condensed.table-bordered.reimbursement-reimbursement-items-table
    %thead
      %tr
        %th= Spree.t(:product)
        %th= Spree.t(:preferred_reimbursement_type)
        %th= Spree.t(:reimbursement_type_override)
        %th= Spree.t(:exchange_for)
        %th= Spree.t(:pre_tax_amount)
        %th= Spree.t(:total)
    %tbody
      - @reimbursement.return_items.each do |return_item|
        %tr
          %td
            .variant-name= return_item.inventory_unit.variant.name
            .variant-options= return_item.inventory_unit.variant.options_text
          %td
            = reimbursement_type_name(return_item.preferred_reimbursement_type)
          %td
            = reimbursement_type_name(return_item.override_reimbursement_type)
          %td
            = return_item.exchange_variant.try(:exchange_name)
          %td
            = return_item.display_pre_tax_amount
          %td
            = return_item.display_total
%fieldset
  %legend= Spree.t(:refunds)
  %table.table.table-condensed.table-bordered
    %thead{"data-hook" => "customer_return_header"}
      %tr
        %th= Spree.t(:description)
        %th= Spree.t(:amount)
    %tbody
      - @reimbursement.refunds.each do |refund|
        %tr{"data-hook" => "reimbursement_refund_row", :id => "#{spree_dom_id(refund)}"}
          %td= refund.description
          %td= refund.display_amount
- if @reimbursement.credits.any?
  %fieldset
    %legend= Spree.t(:credits)
    %table.table.table-condensed.table-bordered
      %thead{"data-hook" => "customer_return_header"}
        %tr
          %th= Spree.t(:description)
          %th= Spree.t(:amount)
      %tbody
        - @reimbursement.credits.each do |credit|
          %tr{"data-hook" => "reimbursement_refund_row", :id => "#{spree_dom_id(credit)}"}
            %td= credit.description
            %td= credit.display_amount
